<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TibiaPedia | Tibia MMORPG Database, Bestiary & Hunting Guide</title>
<meta name="description" content="TibiaPedia - The ultimate Tibia companion. Browse creatures, find hunting spots, plan equipment, explore the interactive map and complete quest guides.">
<meta property="og:title" content="TibiaPedia | Tibia Database & Hunting Guide">
<meta property="og:description" content="Browse 900+ creatures, find the best hunting spots, plan your equipment and explore Tibia's world map.">
<meta property="og:image" content="images/hero-bg.jpg">
<meta name="twitter:card" content="summary_large_image">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;800&family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
--bg-dark:#0d0b0a;--bg-card:#1a1614;--bg-card-hover:#231f1b;--bg-input:#141110;
--gold:#d4a537;--gold-dark:#8b6914;--gold-light:#f0d68a;--gold-dim:rgba(212,165,55,.1);
--parchment:#e8dcc8;--parchment-muted:#a89a84;--blood:#8b1a1a;
--common:#22c55e;--rare:#3b82f6;--epic:#a855f7;--legendary:#d4a537;
--border:rgba(212,165,55,.15);--border-hover:rgba(212,165,55,.35);
--radius:8px;--radius-lg:12px;
--shadow:0 4px 24px rgba(0,0,0,.5);--shadow-lg:0 12px 48px rgba(0,0,0,.7);
}
html{scroll-behavior:smooth}
body{font-family:'Crimson Text',Georgia,serif;background:var(--bg-dark);color:var(--parchment);line-height:1.6;overflow-x:hidden}
h1,h2,h3,h4,h5{font-family:'Cinzel',serif;color:var(--gold-light);line-height:1.2}
a{color:var(--gold);text-decoration:none;transition:color .2s}
a:hover{color:var(--gold-light)}
img{max-width:100%;display:block}
button{font-family:'Crimson Text',serif;cursor:pointer;border:none;background:none;color:var(--parchment)}
input,select{font-family:'Crimson Text',serif;background:var(--bg-input);color:var(--parchment);border:1px solid var(--border);border-radius:var(--radius);padding:10px 14px;font-size:15px;transition:border-color .2s}
input:focus,select:focus{outline:none;border-color:var(--gold)}

.container{max-width:1200px;margin:0 auto;padding:0 20px}

/* ========== HEADER ========== */
.header{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(13,11,10,.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border)}
.nav{display:flex;align-items:center;justify-content:space-between;padding:12px 24px;max-width:1200px;margin:0 auto}
.logo{display:flex;align-items:center;gap:10px}
.logo-img{height:40px;border-radius:6px}
.logo-text{font-family:'Cinzel',serif;font-size:20px;font-weight:700;color:var(--gold-light)}
.nav-links{display:flex;list-style:none;gap:6px}
.nav-links a{padding:8px 14px;border-radius:var(--radius);font-size:14px;font-weight:600;color:var(--parchment-muted);transition:all .2s}
.nav-links a:hover,.nav-links a.active{color:var(--gold);background:var(--gold-dim)}
.mobile-menu{display:none;font-size:24px;color:var(--gold);padding:8px}
@media(max-width:768px){
.nav-links{display:none;position:absolute;top:100%;left:0;right:0;flex-direction:column;background:rgba(13,11,10,.97);border-bottom:1px solid var(--border);padding:12px}
.nav-links.open{display:flex}
.mobile-menu{display:block}
}

/* ========== HERO ========== */
.hero{position:relative;padding:140px 0 80px;text-align:center;overflow:hidden}
.hero::before{content:'';position:absolute;inset:0;background:url('images/lucid-origin_Dark_medieval_fantasy_dungeon_interior_ancient_stone_walls_covered_in_moss_warm_-0.jpg') center/cover;opacity:.25;z-index:0}
.hero::after{content:'';position:absolute;inset:0;background:linear-gradient(to bottom,rgba(13,11,10,.3) 0%,var(--bg-dark) 100%);z-index:1}
.hero .container{position:relative;z-index:2}
.hero-logo{width:120px;height:120px;border-radius:16px;margin:0 auto 24px;border:2px solid var(--gold-dark);box-shadow:0 0 40px rgba(212,165,55,.2)}
.hero h1{font-size:clamp(32px,5vw,56px);margin-bottom:16px;text-shadow:0 2px 20px rgba(0,0,0,.8)}
.hero h1 span{color:var(--gold)}
.hero-desc{font-size:18px;color:var(--parchment-muted);max-width:600px;margin:0 auto 32px}
.hero-stats{display:flex;justify-content:center;gap:40px;flex-wrap:wrap}
.hero-stat{text-align:center}
.hero-stat-num{font-family:'Cinzel',serif;font-size:28px;font-weight:700;color:var(--gold)}
.hero-stat-label{font-size:13px;color:var(--parchment-muted)}

/* ========== SECTIONS ========== */
section{padding:60px 0}
.section-header{text-align:center;margin-bottom:40px}
.section-header h2{font-size:clamp(24px,3.5vw,36px);margin-bottom:8px}
.section-header p{color:var(--parchment-muted);font-size:16px}
.section-divider{width:60px;height:3px;background:linear-gradient(to right,var(--gold-dark),var(--gold));margin:12px auto 0;border-radius:2px}

/* ========== TABS ========== */
.tabs{display:flex;gap:4px;margin-bottom:24px;background:var(--bg-card);border-radius:var(--radius);padding:4px;border:1px solid var(--border);width:fit-content}
.tab-btn{padding:10px 24px;border-radius:6px;font-weight:600;font-size:14px;transition:all .2s;font-family:'Cinzel',serif}
.tab-btn.active{background:var(--gold);color:var(--bg-dark)}
.tab-btn:hover:not(.active){color:var(--gold)}
.tab-content{display:none}
.tab-content.active{display:block}

/* ========== SEARCH & FILTERS ========== */
.filters{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:24px;align-items:center}
.search-box{flex:1;min-width:200px;position:relative}
.search-box input{width:100%;padding-left:36px}
.search-box::before{content:'üîç';position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:14px;opacity:.6}
.filter-group{display:flex;gap:6px;flex-wrap:wrap}
.filter-btn{padding:7px 16px;border-radius:20px;font-size:13px;font-weight:600;border:1px solid var(--border);transition:all .2s;font-family:'Cinzel',serif;letter-spacing:.3px}
.filter-btn.active,.filter-btn:hover{border-color:var(--gold);color:var(--gold);background:var(--gold-dim)}
.level-select{padding:7px 12px;font-size:13px;border-radius:20px;background:var(--bg-card);min-width:140px}

/* ========== CREATURE GRID ========== */
.creature-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px}
.creature-card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);padding:16px 12px;text-align:center;cursor:pointer;transition:all .2s}
.creature-card:hover{border-color:var(--gold);transform:translateY(-2px);box-shadow:var(--shadow)}
.creature-card img{width:64px;height:64px;object-fit:contain;margin:0 auto 8px;image-rendering:pixelated}
.creature-card h4{font-size:12px;color:var(--parchment);font-family:'Cinzel',serif;line-height:1.3}
.pagination{display:flex;justify-content:center;gap:8px;margin-top:24px;flex-wrap:wrap}
.page-btn{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:var(--radius);border:1px solid var(--border);font-size:13px;font-weight:600;transition:all .2s}
.page-btn.active,.page-btn:hover{border-color:var(--gold);color:var(--gold);background:var(--gold-dim)}
.page-btn:disabled{opacity:.3;cursor:not-allowed}
.creature-count{text-align:center;margin-top:12px;font-size:13px;color:var(--parchment-muted)}

/* ========== HUNTING SPOTS ========== */
.spot-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:16px}
.spot-card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);padding:20px;transition:all .2s}
.spot-card:hover{border-color:var(--border-hover);box-shadow:var(--shadow)}
.spot-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}
.spot-name{font-family:'Cinzel',serif;font-size:16px;color:var(--gold-light)}
.spot-level{font-size:12px;padding:4px 10px;border-radius:12px;background:var(--gold-dim);color:var(--gold);font-weight:600;white-space:nowrap}
.spot-meta{display:flex;gap:16px;margin-bottom:10px;font-size:13px;color:var(--parchment-muted)}
.spot-meta span{display:flex;align-items:center;gap:4px}
.spot-rating{display:flex;gap:2px}
.star{color:var(--gold);font-size:11px}
.star.empty{opacity:.25}
.spot-creatures{font-size:13px;color:var(--parchment-muted);margin-bottom:12px;line-height:1.5}
.spot-creatures strong{color:var(--parchment);font-weight:600}
.spot-actions{display:flex;gap:8px}
.btn-sm{padding:6px 14px;border-radius:6px;font-size:12px;font-weight:600;border:1px solid var(--border);transition:all .2s}
.btn-sm:hover{border-color:var(--gold);color:var(--gold)}
.btn-gold{background:var(--gold);color:var(--bg-dark);border-color:var(--gold)}
.btn-gold:hover{background:var(--gold-light);color:var(--bg-dark)}

/* ========== EQUIPMENT PLANNER ========== */
.eq-controls{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:32px;justify-content:center}
.voc-btn{padding:10px 24px;border-radius:var(--radius);font-family:'Cinzel',serif;font-size:14px;font-weight:600;border:1px solid var(--border);transition:all .2s}
.voc-btn.active{background:var(--gold);color:var(--bg-dark);border-color:var(--gold)}
.voc-btn:hover:not(.active){border-color:var(--gold);color:var(--gold)}
.eq-level-btns{display:flex;gap:6px;flex-wrap:wrap;justify-content:center}
.eq-level-btn{padding:6px 14px;border-radius:16px;font-size:12px;font-weight:600;border:1px solid var(--border);transition:all .2s}
.eq-level-btn.active{background:var(--gold-dim);border-color:var(--gold);color:var(--gold)}
.eq-level-btn:hover:not(.active){border-color:var(--gold-dark);color:var(--gold)}

.eq-slots{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;margin-top:24px}
.eq-slot{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);padding:20px;transition:all .2s}
.eq-slot:hover{border-color:var(--border-hover)}
.eq-slot-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}
.eq-slot-icon{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:var(--gold-dim);border-radius:8px;font-size:18px}
.eq-slot-type{font-family:'Cinzel',serif;font-size:14px;color:var(--gold);font-weight:600}
.eq-item-name{font-family:'Cinzel',serif;font-size:16px;color:var(--gold-light);margin-bottom:6px}
.eq-item-stats{font-size:13px;color:var(--parchment-muted);line-height:1.7}
.eq-item-stats span{display:block}
.eq-item-stats .stat-highlight{color:var(--common)}
.eq-item-source{font-size:12px;color:var(--parchment-muted);margin-top:8px;padding-top:8px;border-top:1px solid var(--border);font-style:italic}
.eq-empty{text-align:center;padding:40px;color:var(--parchment-muted);font-style:italic}

/* ========== MAP ========== */
#map{width:100%;height:500px;border-radius:var(--radius-lg);border:1px solid var(--border);background:var(--bg-card)}
.map-legend{display:flex;gap:20px;margin-top:12px;font-size:13px;color:var(--parchment-muted);flex-wrap:wrap}
.map-legend span{display:flex;align-items:center;gap:6px}
.legend-dot{width:10px;height:10px;border-radius:50%;display:inline-block}
.legend-dot.gold{background:var(--gold)}
.legend-dot.blue{background:var(--rare)}

/* ========== QUEST GUIDE ========== */
.quest-grid{display:flex;flex-direction:column;gap:12px}
.quest-card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden;transition:all .2s}
.quest-card:hover{border-color:var(--border-hover)}
.quest-header{display:flex;align-items:center;gap:12px;padding:16px 20px;cursor:pointer;transition:background .2s}
.quest-header:hover{background:var(--bg-card-hover)}
.quest-expand{font-size:18px;color:var(--gold);transition:transform .3s;flex-shrink:0}
.quest-card.open .quest-expand{transform:rotate(90deg)}
.quest-title{font-family:'Cinzel',serif;font-size:15px;color:var(--gold-light);flex:1}
.quest-badges{display:flex;gap:6px;flex-shrink:0;flex-wrap:wrap}
.badge{padding:3px 10px;border-radius:10px;font-size:11px;font-weight:700}
.badge-level{background:var(--gold-dim);color:var(--gold)}
.badge-premium{background:rgba(139,26,26,.2);color:#e74c3c}
.quest-body{display:none;padding:0 20px 20px;border-top:1px solid var(--border)}
.quest-card.open .quest-body{display:block}
.quest-detail{margin-top:12px}
.quest-detail h5{font-size:13px;color:var(--gold);margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px}
.quest-detail p,.quest-detail ul{font-size:14px;color:var(--parchment-muted);line-height:1.7}
.quest-detail ul{list-style:none;padding:0}
.quest-detail ul li::before{content:'‚ñ∏ ';color:var(--gold)}
.quest-no-results{text-align:center;padding:40px;color:var(--parchment-muted);font-style:italic}

/* ========== MODAL ========== */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:200;display:none;align-items:center;justify-content:center;padding:20px}
.modal-overlay.open{display:flex}
.modal{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);max-width:520px;width:100%;max-height:85vh;overflow-y:auto;box-shadow:var(--shadow-lg)}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid var(--border);position:sticky;top:0;background:var(--bg-card);z-index:1}
.modal-header h3{font-size:20px}
.modal-close{font-size:24px;color:var(--parchment-muted);cursor:pointer;padding:4px 8px;border-radius:var(--radius);transition:all .2s}
.modal-close:hover{color:var(--gold);background:var(--gold-dim)}
.modal-body{padding:24px}
.modal-creature-top{display:flex;align-items:center;gap:20px;margin-bottom:20px}
.modal-creature-img{width:64px;height:64px;image-rendering:pixelated;flex-shrink:0}
.modal-creature-info{flex:1}
.modal-stat-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px}
.modal-stat{background:var(--bg-dark);border-radius:var(--radius);padding:12px}
.modal-stat-label{font-size:11px;color:var(--parchment-muted);text-transform:uppercase;letter-spacing:.5px}
.modal-stat-value{font-family:'Cinzel',serif;font-size:18px;color:var(--gold-light);margin-top:2px}
.modal-section{margin-bottom:16px}
.modal-section h4{font-size:13px;color:var(--gold);text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px;padding-bottom:6px;border-bottom:1px solid var(--border)}
.modal-section p,.modal-section ul{font-size:14px;color:var(--parchment-muted);line-height:1.7}
.modal-section ul{list-style:none;padding:0}
.modal-section li{padding:2px 0}
.modal-section li::before{content:'‚Ä¢ ';color:var(--gold)}
.loot-item{display:inline-block;padding:2px 8px;margin:2px;border-radius:4px;font-size:12px;background:var(--bg-dark);border:1px solid var(--border)}
.immune-tag{display:inline-block;padding:2px 8px;margin:2px;border-radius:4px;font-size:12px;font-weight:600}
.immune-fire{background:rgba(239,68,68,.15);color:#ef4444}
.immune-ice{background:rgba(59,130,246,.15);color:#3b82f6}
.immune-earth{background:rgba(34,197,94,.15);color:#22c55e}
.immune-energy{background:rgba(168,85,247,.15);color:#a855f7}
.immune-holy{background:rgba(250,204,21,.15);color:#facc15}
.immune-death{background:rgba(107,114,128,.15);color:#9ca3af}
.immune-physical{background:rgba(212,165,55,.15);color:var(--gold)}
.modal-loading{text-align:center;padding:40px;color:var(--parchment-muted)}

/* ========== FOOTER ========== */
.footer{background:var(--bg-card);border-top:1px solid var(--border);padding:40px 0 24px}
.footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:32px;margin-bottom:32px}
.footer-brand p{font-size:14px;color:var(--parchment-muted);margin-top:8px;line-height:1.6}
.footer h4{font-family:'Cinzel',serif;font-size:14px;color:var(--gold);margin-bottom:12px}
.footer-links{display:flex;flex-direction:column;gap:8px}
.footer-links a{font-size:13px;color:var(--parchment-muted)}
.footer-links a:hover{color:var(--gold)}
.footer-bottom{border-top:1px solid var(--border);padding-top:20px;display:flex;justify-content:space-between;font-size:12px;color:var(--parchment-muted);flex-wrap:wrap;gap:8px}
.footer-bottom a{color:var(--gold)}

/* ========== SCROLLBAR ========== */
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{background:var(--bg-dark)}
::-webkit-scrollbar-thumb{background:var(--gold-dark);border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:var(--gold)}

/* ========== RESPONSIVE ========== */
@media(max-width:768px){
.hero{padding:120px 0 60px}
.hero-stats{gap:20px}
.creature-grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}
.spot-grid{grid-template-columns:1fr}
.eq-slots{grid-template-columns:1fr}
.footer-grid{grid-template-columns:1fr 1fr}
.modal{max-width:95vw}
.modal-stat-grid{grid-template-columns:1fr}
.filters{flex-direction:column}
.search-box{min-width:100%}
#map{height:350px}
}
@media(max-width:480px){
.footer-grid{grid-template-columns:1fr}
.hero-stat-num{font-size:22px}
.tabs{width:100%}
.tab-btn{flex:1;text-align:center;padding:10px 12px;font-size:12px}
}

.loading-spinner{display:inline-block;width:20px;height:20px;border:2px solid var(--border);border-top-color:var(--gold);border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.skeleton{background:linear-gradient(90deg,var(--bg-card) 25%,var(--bg-card-hover) 50%,var(--bg-card) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:var(--radius);height:100px}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
</style>
</head>
<body>

<!-- HEADER -->
<header class="header">
<nav class="nav">
  <a href="#" class="logo">
    <img src="images/ideogram-v3.0_TibiaPedia_medieval_fantasy_logo_ornate_golden_text_on_transparent_dark_backgrou-0.jpg" alt="TibiaPedia" class="logo-img">
    <span class="logo-text">TibiaPedia</span>
  </a>
  <ul class="nav-links" id="navLinks">
    <li><a href="#bestiary" class="active">Bestiary</a></li>
    <li><a href="#equipment">Equipment</a></li>
    <li><a href="#map">Map</a></li>
    <li><a href="#quests">Quests</a></li>
  </ul>
  <button class="mobile-menu" id="mobileMenu" aria-label="Menu">‚ò∞</button>
</nav>
</header>

<!-- HERO -->
<section class="hero">
<div class="container">
  <img src="images/ideogram-v3.0_TibiaPedia_medieval_fantasy_logo_ornate_golden_text_on_transparent_dark_backgrou-0.jpg" alt="TibiaPedia Logo" class="hero-logo">
  <h1>Tibia<span>Pedia</span></h1>
  <p class="hero-desc">Your ultimate companion for exploring the world of Tibia. Creatures, hunting spots, equipment &amp; quest guides ‚Äî all in one place.</p>
  <div class="hero-stats">
    <div class="hero-stat"><div class="hero-stat-num" id="statCreatures">-</div><div class="hero-stat-label">Creatures</div></div>
    <div class="hero-stat"><div class="hero-stat-num">55</div><div class="hero-stat-label">Hunting Spots</div></div>
    <div class="hero-stat"><div class="hero-stat-num">224</div><div class="hero-stat-label">Equipment Items</div></div>
    <div class="hero-stat"><div class="hero-stat-num">35</div><div class="hero-stat-label">Quest Guides</div></div>
  </div>
</div>
</section>

<!-- BESTIARY + HUNTING SPOTS -->
<section id="bestiary">
<div class="container">
  <div class="section-header">
    <h2>Bestiary &amp; Hunting Spots</h2>
    <p>Browse creatures from Tibia's vast world or find the perfect hunting ground</p>
    <div class="section-divider"></div>
  </div>
  <div class="tabs">
    <button class="tab-btn active" data-tab="bestiary-tab">Bestiary</button>
    <button class="tab-btn" data-tab="hunting-tab">Hunting Spots</button>
  </div>

  <!-- BESTIARY TAB -->
  <div class="tab-content active" id="bestiary-tab">
    <div class="filters">
      <div class="search-box"><input type="text" id="creatureSearch" placeholder="Search creatures..."></div>
    </div>
    <div class="creature-grid" id="creatureGrid"></div>
    <div class="pagination" id="creaturePagination"></div>
    <div class="creature-count" id="creatureCount"></div>
  </div>

  <!-- HUNTING SPOTS TAB -->
  <div class="tab-content" id="hunting-tab">
    <div class="filters">
      <div class="filter-group" id="vocFilter">
        <button class="filter-btn active" data-voc="all">All</button>
        <button class="filter-btn" data-voc="knight">Knight</button>
        <button class="filter-btn" data-voc="paladin">Paladin</button>
        <button class="filter-btn" data-voc="sorcerer">Sorcerer</button>
        <button class="filter-btn" data-voc="druid">Druid</button>
      </div>
      <select class="level-select" id="spotLevelFilter">
        <option value="all">All Levels</option>
        <option value="8-30">Level 8‚Äì30</option>
        <option value="30-60">Level 30‚Äì60</option>
        <option value="60-100">Level 60‚Äì100</option>
        <option value="100-150">Level 100‚Äì150</option>
        <option value="150-200">Level 150‚Äì200</option>
        <option value="200-300">Level 200‚Äì300</option>
        <option value="300-999">Level 300+</option>
      </select>
    </div>
    <div class="spot-grid" id="spotGrid"></div>
  </div>
</div>
</section>

<!-- EQUIPMENT PLANNER -->
<section id="equipment">
<div class="container">
  <div class="section-header">
    <h2>Equipment Planner</h2>
    <p>Find the best gear for your vocation and level</p>
    <div class="section-divider"></div>
  </div>
  <div class="eq-controls">
    <div class="filter-group" id="eqVocBtns">
      <button class="voc-btn active" data-voc="knight">Knight</button>
      <button class="voc-btn" data-voc="paladin">Paladin</button>
      <button class="voc-btn" data-voc="sorcerer">Sorcerer</button>
      <button class="voc-btn" data-voc="druid">Druid</button>
    </div>
  </div>
  <div class="eq-level-btns" id="eqLevelBtns">
    <button class="eq-level-btn active" data-lvl="8-30">8‚Äì30</button>
    <button class="eq-level-btn" data-lvl="30-60">30‚Äì60</button>
    <button class="eq-level-btn" data-lvl="60-100">60‚Äì100</button>
    <button class="eq-level-btn" data-lvl="100-150">100‚Äì150</button>
    <button class="eq-level-btn" data-lvl="150-200">150‚Äì200</button>
    <button class="eq-level-btn" data-lvl="200-300">200‚Äì300</button>
    <button class="eq-level-btn" data-lvl="300+">300+</button>
  </div>
  <div class="eq-slots" id="eqSlots"></div>
</div>
</section>

<!-- INTERACTIVE MAP -->
<section id="map">
<div class="container">
  <div class="section-header">
    <h2>Interactive Map</h2>
    <p>Explore the world of Tibia ‚Äî click hunting spot markers for details</p>
    <div class="section-divider"></div>
  </div>
  <div id="mapContainer"></div>
  <div class="map-legend">
    <span><span class="legend-dot gold"></span> Hunting Spot</span>
    <span><span class="legend-dot blue"></span> City</span>
  </div>
</div>
</section>

<!-- QUEST GUIDE -->
<section id="quests">
<div class="container">
  <div class="section-header">
    <h2>Quest Guide</h2>
    <p>Complete quest walkthroughs with rewards, dangers and requirements</p>
    <div class="section-divider"></div>
  </div>
  <div class="filters">
    <div class="search-box"><input type="text" id="questSearch" placeholder="Search quests..."></div>
    <select class="level-select" id="questLevelFilter">
      <option value="all">All Levels</option>
      <option value="1-20">Level 1‚Äì20</option>
      <option value="20-50">Level 20‚Äì50</option>
      <option value="50-80">Level 50‚Äì80</option>
      <option value="80-130">Level 80‚Äì130</option>
      <option value="130-200">Level 130‚Äì200</option>
      <option value="200-999">Level 200+</option>
    </select>
    <label style="display:flex;align-items:center;gap:6px;font-size:13px;cursor:pointer;color:var(--parchment-muted)">
      <input type="checkbox" id="questPremiumFilter" style="accent-color:var(--gold)"> Premium only
    </label>
  </div>
  <div class="quest-grid" id="questGrid"></div>
</div>
</section>

<!-- FOOTER -->
<footer class="footer">
<div class="container">
  <div class="footer-grid">
    <div class="footer-brand">
      <span class="logo-text" style="font-size:18px">TibiaPedia</span>
      <p>A community-driven Tibia companion tool. Browse the bestiary, find hunting spots, plan equipment and follow quest guides.</p>
    </div>
    <div>
      <h4>Sections</h4>
      <div class="footer-links">
        <a href="#bestiary">Bestiary</a>
        <a href="#equipment">Equipment Planner</a>
        <a href="#map">Interactive Map</a>
        <a href="#quests">Quest Guide</a>
      </div>
    </div>
    <div>
      <h4>Resources</h4>
      <div class="footer-links">
        <a href="https://www.tibia.com" target="_blank">Tibia.com</a>
        <a href="https://tibia.fandom.com" target="_blank">TibiaWiki</a>
        <a href="https://tibiamaps.io" target="_blank">Tibia Maps</a>
      </div>
    </div>
    <div>
      <h4>Legal</h4>
      <div class="footer-links">
        <a href="#">Terms of Service</a>
        <a href="#">Privacy Policy</a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>TibiaPedia is a fan project. Tibia is a registered trademark of CipSoft GmbH.</p>
    <p>Website by <a href="https://grindarestudio.com" target="_blank">Grindare Studio</a></p>
  </div>
</div>
</footer>

<!-- CREATURE MODAL -->
<div class="modal-overlay" id="creatureModal">
<div class="modal">
  <div class="modal-header">
    <h3 id="modalCreatureName">-</h3>
    <span class="modal-close" id="modalClose">&times;</span>
  </div>
  <div class="modal-body" id="modalBody">
    <div class="modal-loading"><div class="loading-spinner"></div><p style="margin-top:12px">Loading creature data...</p></div>
  </div>
</div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// ============================================================
// EMBEDDED DATA
// ============================================================

const HUNTING_SPOTS = [
  {name:"Rotworm Caves (Darashia)",level:[8,25],voc:["knight","paladin","sorcerer","druid"],exp:3,loot:2,creatures:["Rotworm","Carrion Worm"],coords:[33220,32430]},
  {name:"Tarantula Caves (Port Hope)",level:[15,35],voc:["knight","paladin"],exp:3,loot:3,creatures:["Tarantula"],coords:[32600,32740]},
  {name:"Cyclopolis (Edron)",level:[25,45],voc:["knight","paladin","sorcerer","druid"],exp:3,loot:3,creatures:["Cyclops","Cyclops Smith","Cyclops Drone"],coords:[33290,31710]},
  {name:"Amazon Camp (Venore)",level:[15,30],voc:["knight","paladin","sorcerer","druid"],exp:2,loot:3,creatures:["Amazon","Valkyrie","Witch"],coords:[32820,32620]},
  {name:"Mintwallin (Rookgaard Exit)",level:[8,20],voc:["knight","paladin","sorcerer","druid"],exp:2,loot:2,creatures:["Minotaur","Minotaur Archer","Minotaur Guard"],coords:[32400,32100]},
  {name:"Dragon Lair (Darashia)",level:[45,70],voc:["knight","paladin"],exp:4,loot:4,creatures:["Dragon"],coords:[33190,32410]},
  {name:"Wyrm Mountain (Liberty Bay)",level:[80,120],voc:["knight","paladin","sorcerer","druid"],exp:4,loot:3,creatures:["Wyrm","Elder Wyrm"],coords:[32330,32860]},
  {name:"Drefia Grim Reapers",level:[120,200],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:4,creatures:["Grim Reaper","Nightmare"],coords:[33160,32490]},
  {name:"Edron Hero Cave",level:[70,100],voc:["knight","paladin"],exp:4,loot:3,creatures:["Hero","Vile Grandmaster"],coords:[33260,31700]},
  {name:"Upper Spike (Kazordoon)",level:[50,80],voc:["knight","druid"],exp:3,loot:3,creatures:["Wyvern","Corym Vanguard","Corym Skirmisher"],coords:[32580,31900]},
  {name:"Krailos Steppe",level:[60,100],voc:["knight","paladin","druid"],exp:4,loot:3,creatures:["Ogre Brute","Ogre Savage","Ogre Shaman"],coords:[33540,31610]},
  {name:"Werehyaena Caves (Grimvale)",level:[80,130],voc:["knight","paladin","sorcerer","druid"],exp:4,loot:4,creatures:["Werehyaena","Werehyaena Shaman"],coords:[33500,31650]},
  {name:"Ghastly Dragons (Zao)",level:[130,200],voc:["knight","paladin"],exp:5,loot:4,creatures:["Ghastly Dragon"],coords:[33290,31150]},
  {name:"Lizard City (Zao)",level:[100,150],voc:["knight","paladin","sorcerer","druid"],exp:4,loot:4,creatures:["Lizard High Guard","Lizard Legionnaire","Lizard Dragon Priest"],coords:[33300,31200]},
  {name:"Oramond Minos (Rathleton)",level:[180,300],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Minotaur Amazon","Minotaur Hunter","Execowtioner","Mooh'tah Warrior"],coords:[33650,31910]},
  {name:"Glooth Bandits (Rathleton)",level:[150,250],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Glooth Bandit"],coords:[33660,31900]},
  {name:"Barkless Elves (Ab'Dendriel)",level:[100,150],voc:["sorcerer","druid"],exp:4,loot:3,creatures:["Barkless Devotee","Barkless Fanatic"],coords:[32720,31600]},
  {name:"Carnivora Rocks (Port Hope)",level:[50,80],voc:["knight","paladin","druid"],exp:3,loot:3,creatures:["Spitter","Carniphila","Hydra"],coords:[32600,32780]},
  {name:"Banuta Apes (Port Hope)",level:[60,90],voc:["knight","paladin","druid"],exp:3,loot:3,creatures:["Merlkin","Sibang","Kongra"],coords:[32700,32800]},
  {name:"Yalahar Cemetery Quarter",level:[60,100],voc:["knight","paladin","sorcerer","druid"],exp:4,loot:3,creatures:["Zombie","Ghoul","Vampire","Demon Skeleton"],coords:[32840,31270]},
  {name:"Yalahar Alchemist Quarter",level:[80,120],voc:["knight","paladin","sorcerer","druid"],exp:4,loot:3,creatures:["Mutated Human","Mutated Rat","Mercury Blob"],coords:[32870,31290]},
  {name:"Deeper Banuta (Port Hope)",level:[100,150],voc:["knight","paladin","sorcerer","druid"],exp:4,loot:4,creatures:["Medusa","Serpent Spawn","Hydra"],coords:[32710,32810]},
  {name:"Hellspawns (Yalahar)",level:[100,160],voc:["knight","paladin"],exp:4,loot:4,creatures:["Hellspawn"],coords:[32830,31250]},
  {name:"Nightmare Isles (Roshamuul)",level:[150,250],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:4,creatures:["Nightmare","Plaguesmith"],coords:[33520,32410]},
  {name:"Demon Forge (Goroma)",level:[200,350],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Demon","Fire Devil","Dark Torturer"],coords:[32350,32530]},
  {name:"Ferumbras Ascension -1 (Edron)",level:[250,400],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Hellflayer","Vexclaw","Grimeleech"],coords:[33280,31720]},
  {name:"Frost Dragons (Okolnir)",level:[80,130],voc:["knight","paladin"],exp:4,loot:4,creatures:["Frost Dragon","Ice Dragon"],coords:[32350,31050]},
  {name:"Draken Walls (Zao)",level:[130,200],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:4,creatures:["Draken Spellweaver","Draken Elite","Draken Abomination"],coords:[33340,31230]},
  {name:"Warzone 1-3 (Gnomebase Alpha)",level:[200,350],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Deathling Scout","Deathling Spellsinger"],coords:[32600,31940]},
  {name:"Asura Palace (Port Hope)",level:[150,250],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Asura","Dawnfire Asura","Midnight Asura","True Midnight Asura"],coords:[32620,32760]},
  {name:"Buried Cathedral (Edron)",level:[100,160],voc:["knight","paladin","sorcerer","druid"],exp:4,loot:3,creatures:["Undead Elite","Betrayed Wraith","Lost Soul"],coords:[33250,31750]},
  {name:"Fenrock DLs (Edron Shortcut)",level:[70,100],voc:["knight","paladin"],exp:4,loot:4,creatures:["Dragon Lord"],coords:[33280,31690]},
  {name:"Giant Spider Cave (Port Hope)",level:[50,80],voc:["knight","paladin","sorcerer","druid"],exp:3,loot:3,creatures:["Giant Spider"],coords:[32640,32750]},
  {name:"Ancient Scarab Tomb (Ankrahmun)",level:[50,80],voc:["knight","paladin","druid"],exp:3,loot:4,creatures:["Ancient Scarab","Bonebeast"],coords:[33160,32680]},
  {name:"Issavi Surface (Kilmaresh)",level:[200,300],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:4,creatures:["Burning Gladiator","Priestess of the Wild Sun","Retching Horror"],coords:[33920,31430]},
  {name:"Spectres (Yalahar)",level:[100,160],voc:["sorcerer","druid"],exp:4,loot:3,creatures:["Spectre","Arachnophobica"],coords:[32850,31280]},
  {name:"Flimsy Lost Souls (Darashia)",level:[250,400],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Flimsy Lost Soul","Mean Lost Soul","Freakish Lost Soul"],coords:[33200,32450]},
  {name:"Pirats (Rascacoon)",level:[200,300],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Pirat Bombardier","Pirat Scoundrel","Pirat Cutthroat"],coords:[33660,32760]},
  {name:"Catacombs (Darashia Tombs)",level:[30,60],voc:["knight","paladin","sorcerer","druid"],exp:3,loot:3,creatures:["Mummy","Crypt Shambler","Demon Skeleton"],coords:[33170,32470]},
  {name:"Forbidden Lands (Edron)",level:[60,100],voc:["knight","paladin"],exp:3,loot:3,creatures:["Behemoth","Elder Beholder"],coords:[33270,31690]},
  {name:"Old Fortress (Edron)",level:[45,70],voc:["knight","paladin","sorcerer","druid"],exp:3,loot:3,creatures:["Stone Golem","Energy Elemental"],coords:[33240,31700]},
  {name:"Vampire Crypt (Edron)",level:[40,70],voc:["knight","paladin","sorcerer","druid"],exp:3,loot:3,creatures:["Vampire","Vampire Bride","Bonelord"],coords:[33250,31730]},
  {name:"Dwarf Mines (Kazordoon)",level:[15,40],voc:["knight","paladin","sorcerer","druid"],exp:2,loot:2,creatures:["Dwarf","Dwarf Soldier","Dwarf Guard"],coords:[32590,31900]},
  {name:"Wailing Widow Cave (Tiquanda)",level:[40,70],voc:["knight","paladin"],exp:3,loot:3,creatures:["Wailing Widow","Brimstone Bug"],coords:[32660,32740]},
  {name:"Sea Serpent South (Svargrond)",level:[80,120],voc:["knight","paladin"],exp:4,loot:4,creatures:["Sea Serpent","Young Sea Serpent"],coords:[32240,31120]},
  {name:"Roshamuul Prison (Guzzlemaw)",level:[200,300],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Guzzlemaw","Frazzlemaw","Silencer"],coords:[33530,32400]},
  {name:"Falcon Bastion (Edron)",level:[250,400],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Falcon Knight","Falcon Paladin"],coords:[33330,31700]},
  {name:"Cobra Bastion (Issavi)",level:[250,400],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Cobra Assassin","Cobra Scout","Cobra Vizier"],coords:[33910,31440]},
  {name:"Carnivora's Rocks (Lower)",level:[80,130],voc:["knight","paladin","sorcerer","druid"],exp:4,loot:3,creatures:["Hydra","Serpent Spawn"],coords:[32610,32790]},
  {name:"Werecave (Edron)",level:[60,100],voc:["knight","paladin","sorcerer","druid"],exp:4,loot:4,creatures:["Werewolf","Werebear","Werefox"],coords:[33270,31740]},
  {name:"Muggy Plains (Zao)",level:[100,150],voc:["knight","druid"],exp:4,loot:3,creatures:["Lizard Chosen","Lizard Zaogun"],coords:[33310,31190]},
  {name:"Grimvale (Full Were)",level:[130,200],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Wereboar","Werebadger","Werefox","Werewolf","Werebear"],coords:[33510,31660]},
  {name:"Summer Court (Feyrist)",level:[150,250],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:4,creatures:["Pixie","Faun","Swan Maiden","Nymph"],coords:[33560,32220]},
  {name:"Winter Court (Feyrist)",level:[150,250],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:4,creatures:["Boar Man","Dark Faun","Twisted Pooka"],coords:[33570,32230]},
  {name:"Library (Secret)",level:[250,400],voc:["knight","paladin","sorcerer","druid"],exp:5,loot:5,creatures:["Burning Book","Icecold Book","Energized Raging Mage","Raging Fire"],coords:[32760,32750]}
];

const EQUIPMENT = {
  knight: {
    "8-30": {helmet:{name:"Soldier Helmet",stats:"Arm: 5",source:"Dwarf Guards, Orc Leaders"},armor:{name:"Plate Armor",stats:"Arm: 12",source:"Cyclops, Orc Leaders"},legs:{name:"Plate Legs",stats:"Arm: 7",source:"Dragon, Elf Arcanist"},boots:{name:"Leather Boots",stats:"Arm: 1",source:"Various creatures"},shield:{name:"Dwarven Shield",stats:"Def: 26",source:"Dwarf Guard"},weapon:{name:"Bright Sword",stats:"Atk: 36, Def: 30",source:"Orc Leaders, Amazon Camp"},ring:{name:"Life Ring",stats:"+1 HP/turn",source:"NPC or loot"},amulet:{name:"Protection Amulet",stats:"Physical protection 6%",source:"NPC (100gp)"}},
    "30-60": {helmet:{name:"Royal Helmet",stats:"Arm: 9",source:"Behemoths, Quests"},armor:{name:"Blue Robe",stats:"Arm: 11, Magic +1",source:"Dragon Lords, Demons"},legs:{name:"Crown Legs",stats:"Arm: 9",source:"Quests, Dragon Lords"},boots:{name:"Boots of Haste",stats:"Speed +20",source:"Dragon Lords, Quests"},shield:{name:"Demon Shield",stats:"Def: 35",source:"Demons, Quests"},weapon:{name:"Relic Sword",stats:"Atk: 39, Def: 24",source:"Inquisition Quest"},ring:{name:"Life Ring",stats:"+1 HP/turn",source:"NPC"},amulet:{name:"Platinum Amulet",stats:"Physical protection 4%",source:"NPC (2000gp)"}},
    "60-100": {helmet:{name:"Royal Helmet",stats:"Arm: 9",source:"Behemoths, Quests"},armor:{name:"Magic Plate Armor",stats:"Arm: 17",source:"Dragon Lords, Behemoths"},legs:{name:"Golden Legs",stats:"Arm: 9",source:"Annihilator Quest"},boots:{name:"Boots of Haste",stats:"Speed +20",source:"Dragon Lords, Quests"},shield:{name:"Blessed Shield",stats:"Def: 40",source:"Inquisition Quest"},weapon:{name:"Magic Longsword",stats:"Atk: 56, Def: 37",source:"Behemoths, Hydras"},ring:{name:"Ring of Healing",stats:"+2 HP/turn",source:"NPC or loot"},amulet:{name:"Amulet of Loss",stats:"No skill/xp loss on death",source:"NPC"}},
    "100-150": {helmet:{name:"Zaoan Helmet",stats:"Arm: 9, Sword +1",source:"Lizard City Zao"},armor:{name:"Prismatic Armor",stats:"Arm: 16, Phys prot 5%",source:"Mino Task, Market"},legs:{name:"Zaoan Legs",stats:"Arm: 9",source:"Lizard City Zao"},boots:{name:"Guardian Boots",stats:"Arm: 3, Speed +4",source:"Market, Quests"},shield:{name:"Ornate Shield",stats:"Def: 38",source:"Market, Mino Task"},weapon:{name:"Shiny Blade",stats:"Atk: 52, Def: 29, Sword +1",source:"Roshamuul, Market"},ring:{name:"Prismatic Ring",stats:"Phys prot 5%, 1h",source:"Market"},amulet:{name:"Foxtail Amulet",stats:"+4 Speed",source:"Were creatures"}},
    "150-200": {helmet:{name:"Cobra Hood",stats:"Arm: 10, ML +1, Sword +2",source:"Cobra Bastion"},armor:{name:"Prismatic Armor",stats:"Arm: 16, Phys prot 5%",source:"Market"},legs:{name:"Ornate Legs",stats:"Arm: 10",source:"Oramond Minos"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10, Dist +1",source:"Dream Courts"},shield:{name:"Ornate Shield",stats:"Def: 38",source:"Market, Mino Task"},weapon:{name:"Blade of Destruction",stats:"Atk: 54, Def: 31, Sword +3",source:"Ferumbras Ascension"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Foxtail Amulet",stats:"+4 Speed",source:"Were creatures"}},
    "200-300": {helmet:{name:"Falcon Coif",stats:"Arm: 11, Shielding +3",source:"Falcon Bastion"},armor:{name:"Falcon Plate",stats:"Arm: 17, Sword +3",source:"Falcon Bastion"},legs:{name:"Fabulous Legs",stats:"Arm: 10, Speed +12",source:"Secret Library"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Falcon Shield",stats:"Def: 41, Shielding +3",source:"Falcon Bastion"},weapon:{name:"Falcon Battleaxe",stats:"Atk: 54, Def: 32, Axe +3",source:"Falcon Bastion"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}},
    "300+": {helmet:{name:"Falcon Coif",stats:"Arm: 11, Shielding +3",source:"Falcon Bastion"},armor:{name:"Soulmantle",stats:"Arm: 18, Sword +4",source:"Soul War Quest"},legs:{name:"Soulstrider",stats:"Arm: 11, Speed +15",source:"Soul War Quest"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Soulbastion",stats:"Def: 42, Shielding +4",source:"Soul War Quest"},weapon:{name:"Soulcutter",stats:"Atk: 55, Def: 33, Sword +4",source:"Soul War Quest"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}}
  },
  paladin: {
    "8-30": {helmet:{name:"Soldier Helmet",stats:"Arm: 5",source:"Dwarf Guards, Orc Leaders"},armor:{name:"Scale Armor",stats:"Arm: 9",source:"Various creatures"},legs:{name:"Plate Legs",stats:"Arm: 7",source:"Dragon, Elf Arcanist"},boots:{name:"Leather Boots",stats:"Arm: 1",source:"Various"},shield:{name:"Dwarven Shield",stats:"Def: 26",source:"Dwarf Guard"},weapon:{name:"Elvish Bow",stats:"Range: 6, Atk +1",source:"Elf Arcanist, Market"},ring:{name:"Life Ring",stats:"+1 HP/turn",source:"NPC"},amulet:{name:"Protection Amulet",stats:"Phys prot 6%",source:"NPC (100gp)"}},
    "30-60": {helmet:{name:"Royal Helmet",stats:"Arm: 9",source:"Behemoths"},armor:{name:"Paladin Armor",stats:"Arm: 12, Dist +2",source:"Quest, Market"},legs:{name:"Crown Legs",stats:"Arm: 9",source:"Quest, Dragon Lords"},boots:{name:"Boots of Haste",stats:"Speed +20",source:"Dragon Lords"},shield:{name:"Demon Shield",stats:"Def: 35",source:"Demons"},weapon:{name:"Arbalest",stats:"Range: 6, Atk: 49",source:"Market"},ring:{name:"Life Ring",stats:"+1 HP/turn",source:"NPC"},amulet:{name:"Platinum Amulet",stats:"Phys prot 4%",source:"NPC (2000gp)"}},
    "60-100": {helmet:{name:"Royal Helmet",stats:"Arm: 9",source:"Behemoths"},armor:{name:"Paladin Armor",stats:"Arm: 12, Dist +2",source:"Quest, Market"},legs:{name:"Golden Legs",stats:"Arm: 9",source:"Annihilator Quest"},boots:{name:"Boots of Haste",stats:"Speed +20",source:"Dragon Lords"},shield:{name:"Blessed Shield",stats:"Def: 40",source:"Inquisition"},weapon:{name:"Mycological Bow",stats:"Range: 6, Atk: 52",source:"Mushroom, Market"},ring:{name:"Ring of Healing",stats:"+2 HP/turn",source:"NPC"},amulet:{name:"Amulet of Loss",stats:"No skill/xp loss on death",source:"NPC"}},
    "100-150": {helmet:{name:"Zaoan Helmet",stats:"Arm: 9, Dist +2",source:"Lizard City Zao"},armor:{name:"Prismatic Armor",stats:"Arm: 16, Phys prot 5%",source:"Market"},legs:{name:"Zaoan Legs",stats:"Arm: 9",source:"Lizard City Zao"},boots:{name:"Guardian Boots",stats:"Arm: 3, Speed +4",source:"Market"},shield:{name:"Ornate Shield",stats:"Def: 38",source:"Market"},weapon:{name:"Rift Bow",stats:"Range: 7, Atk: 54, Dist +2",source:"Roshamuul"},ring:{name:"Prismatic Ring",stats:"Phys prot 5%, 1h",source:"Market"},amulet:{name:"Foxtail Amulet",stats:"+4 Speed",source:"Were creatures"}},
    "150-200": {helmet:{name:"Cobra Hood",stats:"Arm: 10, ML +1, Dist +2",source:"Cobra Bastion"},armor:{name:"Prismatic Armor",stats:"Arm: 16, Phys prot 5%",source:"Market"},legs:{name:"Ornate Legs",stats:"Arm: 10",source:"Oramond Minos"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Ornate Shield",stats:"Def: 38",source:"Market"},weapon:{name:"Bow of Destruction",stats:"Range: 7, Atk: 56, Dist +3",source:"Ferumbras Ascension"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}},
    "200-300": {helmet:{name:"Falcon Coif",stats:"Arm: 11, Dist +3",source:"Falcon Bastion"},armor:{name:"Falcon Plate",stats:"Arm: 17, Dist +3",source:"Falcon Bastion"},legs:{name:"Fabulous Legs",stats:"Arm: 10, Speed +12",source:"Secret Library"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Falcon Shield",stats:"Def: 41, Shielding +3",source:"Falcon Bastion"},weapon:{name:"Falcon Bow",stats:"Range: 7, Atk: 57, Dist +4",source:"Falcon Bastion"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}},
    "300+": {helmet:{name:"Falcon Coif",stats:"Arm: 11, Dist +3",source:"Falcon Bastion"},armor:{name:"Soulmantle",stats:"Arm: 18, Dist +4",source:"Soul War Quest"},legs:{name:"Soulstrider",stats:"Arm: 11, Speed +15",source:"Soul War Quest"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Soulbastion",stats:"Def: 42, Shielding +4",source:"Soul War Quest"},weapon:{name:"Soulpiercer",stats:"Range: 7, Atk: 58, Dist +4",source:"Soul War Quest"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}}
  },
  sorcerer: {
    "8-30": {helmet:{name:"Magician's Hat",stats:"Arm: 2, ML +1",source:"NPC, Market"},armor:{name:"Blue Robe",stats:"Arm: 11, ML +1",source:"Dragon Lords"},legs:{name:"Plate Legs",stats:"Arm: 7",source:"Various"},boots:{name:"Sandals",stats:"Arm: 1",source:"NPC"},shield:{name:"Spellbook of Mind Control",stats:"Def: 18, ML +1",source:"NPC, Market"},weapon:{name:"Wand of Dragonbreath",stats:"Magic: 13 fire, ML req 13",source:"NPC"},ring:{name:"Life Ring",stats:"+1 HP/turn",source:"NPC"},amulet:{name:"Protection Amulet",stats:"Phys prot 6%",source:"NPC"}},
    "30-60": {helmet:{name:"Magician's Hat",stats:"Arm: 2, ML +1",source:"NPC"},armor:{name:"Blue Robe",stats:"Arm: 11, ML +1",source:"Dragon Lords"},legs:{name:"Crown Legs",stats:"Arm: 9",source:"Quest"},boots:{name:"Boots of Haste",stats:"Speed +20",source:"Dragon Lords"},shield:{name:"Spellbook of Warding",stats:"Def: 19, ML +2",source:"Orc Fortress"},weapon:{name:"Wand of Inferno",stats:"Magic: 56 fire, ML req 33",source:"NPC"},ring:{name:"Energy Ring",stats:"Mana Shield",source:"NPC"},amulet:{name:"Platinum Amulet",stats:"Phys prot 4%",source:"NPC"}},
    "60-100": {helmet:{name:"Yalahari Mask",stats:"Arm: 5, ML +2",source:"Yalahar Quest"},armor:{name:"Master Archer's Armor",stats:"Arm: 14, ML +3",source:"Market"},legs:{name:"Golden Legs",stats:"Arm: 9",source:"Annihilator Quest"},boots:{name:"Boots of Haste",stats:"Speed +20",source:"Dragon Lords"},shield:{name:"Spellbook of Dark Mysteries",stats:"Def: 20, ML +3",source:"Market"},weapon:{name:"Wand of Defiance",stats:"Magic: 85 fire, ML req 65",source:"NPC"},ring:{name:"Ring of Healing",stats:"+2 HP/turn",source:"NPC"},amulet:{name:"Amulet of Loss",stats:"No skill/xp loss on death",source:"NPC"}},
    "100-150": {helmet:{name:"Yalahari Mask",stats:"Arm: 5, ML +2",source:"Yalahar Quest"},armor:{name:"Gill Coat",stats:"Arm: 15, ML +2, Ice prot 8%",source:"Market"},legs:{name:"Zaoan Legs",stats:"Arm: 9",source:"Lizard City"},boots:{name:"Pair of Soft Boots",stats:"+HP/MP regen",source:"Coryms, Market"},shield:{name:"Spellbook of Dark Mysteries",stats:"Def: 20, ML +3",source:"Market"},weapon:{name:"Wand of Everblazing",stats:"Magic: 86 fire, ML req 65",source:"Roshamuul"},ring:{name:"Prismatic Ring",stats:"Phys prot 5%, 1h",source:"Market"},amulet:{name:"Foxtail Amulet",stats:"+4 Speed",source:"Were creatures"}},
    "150-200": {helmet:{name:"Cobra Hood",stats:"Arm: 10, ML +2",source:"Cobra Bastion"},armor:{name:"Gill Coat",stats:"Arm: 15, ML +2",source:"Market"},legs:{name:"Ornate Legs",stats:"Arm: 10",source:"Oramond"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Spellbook of Dark Mysteries",stats:"Def: 20, ML +3",source:"Market"},weapon:{name:"Wand of Destruction",stats:"Magic: 90 fire, ML req 70",source:"Ferumbras Ascension"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}},
    "200-300": {helmet:{name:"Falcon Coif",stats:"Arm: 11, ML +3",source:"Falcon Bastion"},armor:{name:"Falcon Plate",stats:"Arm: 17, ML +3",source:"Falcon Bastion"},legs:{name:"Fabulous Legs",stats:"Arm: 10, Speed +12",source:"Secret Library"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Falcon Escutcheon",stats:"Def: 36, ML +3",source:"Falcon Bastion"},weapon:{name:"Falcon Wand",stats:"Magic: 92 fire, ML +3",source:"Falcon Bastion"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}},
    "300+": {helmet:{name:"Falcon Coif",stats:"Arm: 11, ML +3",source:"Falcon Bastion"},armor:{name:"Soulmantle",stats:"Arm: 18, ML +4",source:"Soul War Quest"},legs:{name:"Soulstrider",stats:"Arm: 11, Speed +15",source:"Soul War Quest"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Soulbastion",stats:"Def: 42, ML +4",source:"Soul War Quest"},weapon:{name:"Soultainter",stats:"Magic: 94 fire, ML +4",source:"Soul War Quest"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}}
  },
  druid: {
    "8-30": {helmet:{name:"Magician's Hat",stats:"Arm: 2, ML +1",source:"NPC"},armor:{name:"Blue Robe",stats:"Arm: 11, ML +1",source:"Dragon Lords"},legs:{name:"Plate Legs",stats:"Arm: 7",source:"Various"},boots:{name:"Sandals",stats:"Arm: 1",source:"NPC"},shield:{name:"Spellbook of Mind Control",stats:"Def: 18, ML +1",source:"NPC"},weapon:{name:"Hailstorm Rod",stats:"Magic: 13 ice, ML req 13",source:"NPC"},ring:{name:"Life Ring",stats:"+1 HP/turn",source:"NPC"},amulet:{name:"Protection Amulet",stats:"Phys prot 6%",source:"NPC"}},
    "30-60": {helmet:{name:"Magician's Hat",stats:"Arm: 2, ML +1",source:"NPC"},armor:{name:"Blue Robe",stats:"Arm: 11, ML +1",source:"Dragon Lords"},legs:{name:"Crown Legs",stats:"Arm: 9",source:"Quest"},boots:{name:"Boots of Haste",stats:"Speed +20",source:"Dragon Lords"},shield:{name:"Spellbook of Warding",stats:"Def: 19, ML +2",source:"Orc Fortress"},weapon:{name:"Underworld Rod",stats:"Magic: 56 death, ML req 32",source:"NPC"},ring:{name:"Energy Ring",stats:"Mana Shield",source:"NPC"},amulet:{name:"Platinum Amulet",stats:"Phys prot 4%",source:"NPC"}},
    "60-100": {helmet:{name:"Yalahari Mask",stats:"Arm: 5, ML +2",source:"Yalahar Quest"},armor:{name:"Master Archer's Armor",stats:"Arm: 14, ML +3",source:"Market"},legs:{name:"Golden Legs",stats:"Arm: 9",source:"Annihilator Quest"},boots:{name:"Boots of Haste",stats:"Speed +20",source:"Dragon Lords"},shield:{name:"Spellbook of Dark Mysteries",stats:"Def: 20, ML +3",source:"Market"},weapon:{name:"Deepling Staff",stats:"Magic: 85 ice, ML req 65",source:"NPC"},ring:{name:"Ring of Healing",stats:"+2 HP/turn",source:"NPC"},amulet:{name:"Amulet of Loss",stats:"No skill/xp loss on death",source:"NPC"}},
    "100-150": {helmet:{name:"Yalahari Mask",stats:"Arm: 5, ML +2",source:"Yalahar Quest"},armor:{name:"Gill Coat",stats:"Arm: 15, ML +2, Ice prot 8%",source:"Market"},legs:{name:"Zaoan Legs",stats:"Arm: 9",source:"Lizard City"},boots:{name:"Pair of Soft Boots",stats:"+HP/MP regen",source:"Coryms, Market"},shield:{name:"Spellbook of Dark Mysteries",stats:"Def: 20, ML +3",source:"Market"},weapon:{name:"Rod of Destruction",stats:"Magic: 90 ice, ML req 70",source:"Ferumbras Ascension"},ring:{name:"Prismatic Ring",stats:"Phys prot 5%, 1h",source:"Market"},amulet:{name:"Foxtail Amulet",stats:"+4 Speed",source:"Were creatures"}},
    "150-200": {helmet:{name:"Cobra Hood",stats:"Arm: 10, ML +2",source:"Cobra Bastion"},armor:{name:"Gill Coat",stats:"Arm: 15, ML +2",source:"Market"},legs:{name:"Ornate Legs",stats:"Arm: 10",source:"Oramond"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Spellbook of Dark Mysteries",stats:"Def: 20, ML +3",source:"Market"},weapon:{name:"Rod of Destruction",stats:"Magic: 90 ice, ML req 70",source:"Ferumbras Ascension"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}},
    "200-300": {helmet:{name:"Falcon Coif",stats:"Arm: 11, ML +3",source:"Falcon Bastion"},armor:{name:"Falcon Plate",stats:"Arm: 17, ML +3",source:"Falcon Bastion"},legs:{name:"Fabulous Legs",stats:"Arm: 10, Speed +12",source:"Secret Library"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Falcon Escutcheon",stats:"Def: 36, ML +3",source:"Falcon Bastion"},weapon:{name:"Falcon Rod",stats:"Magic: 92 ice, ML +3",source:"Falcon Bastion"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}},
    "300+": {helmet:{name:"Falcon Coif",stats:"Arm: 11, ML +3",source:"Falcon Bastion"},armor:{name:"Soulmantle",stats:"Arm: 18, ML +4",source:"Soul War Quest"},legs:{name:"Soulstrider",stats:"Arm: 11, Speed +15",source:"Soul War Quest"},boots:{name:"Pair of Dreamwalkers",stats:"Arm: 3, Speed +10",source:"Dream Courts"},shield:{name:"Soulbastion",stats:"Def: 42, ML +4",source:"Soul War Quest"},weapon:{name:"Soultainter",stats:"Magic: 94 ice, ML +4",source:"Soul War Quest"},ring:{name:"Ring of Blue Plasma",stats:"+2 ML",source:"Gnomprona"},amulet:{name:"Enchanted Theurgic Amulet",stats:"Phys prot 2%, +2 ML",source:"Forgotten Knowledge"}}
  }
};

const QUESTS = [
  {name:"The Rookie Guard Quest",level:1,premium:false,location:"Rookgaard",description:"Help guard the town and prove yourself worthy. A classic starter quest that teaches basic game mechanics.",rewards:["Brass Armor","Brass Helmet","100 exp"],dangers:["Rats","Wolves"]},
  {name:"The Desert Dungeon Quest",level:0,premium:false,location:"Ankrahmun",description:"Explore the crypt systems beneath the desert sands of Ankrahmun. Contains several treasure rooms.",rewards:["Silver Brooch","Green Gem","150gp"],dangers:["Skeleton","Ghoul","Mummy"]},
  {name:"The Paradox Tower Quest",level:30,premium:true,location:"Edron",description:"Climb the mysterious Paradox Tower by answering riddles from the Mad Mage. One of Tibia's most iconic quests with unique puzzle mechanics.",rewards:["Wand of Cosmic Energy","3000 exp"],dangers:["None (puzzle-based)"]},
  {name:"Pits of Inferno Quest",level:100,premium:true,location:"Edron/PoI",description:"Navigate through 7 deadly throne rooms, each representing a deadly sin. One of Tibia's hardest classic quests.",rewards:["Arbalest","Soft Boots","Backpack of Holding"],dangers:["Demons","Juggernauts","Hellhounds","Destroyers"]},
  {name:"The Inquisition Quest",level:100,premium:true,location:"Multiple cities",description:"Join the Inquisition to fight evil across the land. A massive questline spanning multiple cities with increasingly difficult bosses.",rewards:["Blessed Shield","Emerald Sword","Access to further content"],dangers:["Ushuriel","Zugurosh","Madareth","Annihilon"]},
  {name:"Wrath of the Emperor Quest",level:100,premium:true,location:"Zao",description:"Help the dragon empire by infiltrating the enemy lines. Explore the continent of Zao and face fierce lizard warriors.",rewards:["Helmet of the Deep","Fire Sword","Zao access"],dangers:["Draken Spellweaver","Draken Elite","Lizard Chosen"]},
  {name:"The New Frontier Quest",level:80,premium:true,location:"Zao",description:"Pioneer into uncharted territory. Establish an outpost and explore the mysterious continent of Zao.",rewards:["Relic Sword","Zao Outpost access","15000 exp"],dangers:["Lizard High Guard","Bonebeasts","War Golems"]},
  {name:"Children of the Revolution Quest",level:80,premium:true,location:"Zao",description:"Aid the rebel lizards in their fight for freedom against the dragon overlords.",rewards:["Zaoan equipment access","Rebel base access"],dangers:["Lizard Legionnaire","Lizard Dragon Priest"]},
  {name:"In Service of Yalahar Quest",level:80,premium:true,location:"Yalahar",description:"Explore the quarters of Yalahar and help restore order to this once-great city. Multi-chapter quest with unique boss fights.",rewards:["Yalahari Mask","Yalahari Leg Piece","Access to Yalahar quarters"],dangers:["Mutated creatures","Undead","Demons"]},
  {name:"Bigfoot's Burden Quest",level:100,premium:true,location:"Kazordoon",description:"Help the gnomes defend against the threat from below. Unlock access to Warzones and daily tasks.",rewards:["Warzone access","Gnomish equipment","Daily boss access"],dangers:["Deathlings","Diremaws","Gnomevil"]},
  {name:"Forgotten Knowledge Quest",level:250,premium:true,location:"Multiple locations",description:"Uncover ancient knowledge scattered across the world. Fight powerful bosses to earn legendary equipment.",rewards:["Enchanted Theurgic Amulet","Gnomish gear upgrades"],dangers:["The Last Lore Keeper","Lloyd","The Sandking"]},
  {name:"Ferumbras' Ascension Quest",level:250,premium:true,location:"Edron",description:"Stop Ferumbras from ascending to unimaginable power. Features some of the hardest content in the game.",rewards:["Blade/Bow/Wand/Rod of Destruction","Access to bosses"],dangers:["Hellflayer","Vexclaw","Grimeleech","Ferumbras Mortal Shell"]},
  {name:"Secret Library Quest",level:250,premium:true,location:"Multiple locations",description:"Explore the hidden library dimensions and fight powerful knowledge keepers. Some of the best exp in the game.",rewards:["Fabulous Legs","Library access"],dangers:["Burning Book","Icecold Book","Energized Raging Mage"]},
  {name:"Soul War Quest",level:250,premium:true,location:"Feyrist/Zarganash",description:"Enter the realm between life and death. The pinnacle of Tibia endgame content with best-in-slot rewards.",rewards:["Soulmantle","Soulstrider","Soulbastion","Soulcutter/Soulpiercer/Soultainter"],dangers:["Goshnar's Cruelty","Goshnar's Megalomania","Goshnar's Malice"]},
  {name:"Killing in the Name of... Quest",level:0,premium:true,location:"Port Hope",description:"Grizzly Adams' task system. Hunt specific creatures in quantity to earn points and unlock rewards. Repeatable.",rewards:["Hunting task points","Outfit addons","Boss access"],dangers:["Varies by task"]},
  {name:"The Explorer Society Quest",level:25,premium:true,location:"Port Hope / Northport",description:"Join the famous Explorer Society and undertake missions across Tibia to advance in rank.",rewards:["Explorer Society rank","Various items","Teleport access"],dangers:["Minor encounters"]},
  {name:"The Djinn War Quest",level:40,premium:true,location:"Ankrahmun / Drefia",description:"Choose a side in the eternal war between Marid and Efreet djinns. Unlocks unique trade NPCs.",rewards:["Blue/Green Djinn NPC access","Djinn trade prices"],dangers:["Efreet","Marid","Blue Djinn","Green Djinn"]},
  {name:"The Royal Rescue Quest",level:0,premium:false,location:"Thais / Mintwallin",description:"Rescue a kidnapped royal from the minotaur underground city of Mintwallin.",rewards:["Crown Armor","10000 gold"],dangers:["Minotaur Guard","Minotaur Mage"]},
  {name:"The Annihilator Quest",level:100,premium:false,location:"Near Venore",description:"The classic 4-player quest. Enter a small room and face 6 Demons at once. Teamwork is essential.",rewards:["Demon Armor / Magic Plate Armor / Stonecutter Axe / Golden Legs"],dangers:["6 Demons (at once!)"]},
  {name:"The Ice Islands Quest",level:60,premium:true,location:"Svargrond / Okolnir",description:"Explore the frozen lands of Svargrond and investigate the barbarian threats.",rewards:["Shaman Outfit","Barbarian access","Frost Dragon hunting"],dangers:["Frost Dragons","Barbarian Bloodwalker","Crystal Spider"]},
  {name:"The Ape City Quest",level:40,premium:true,location:"Port Hope / Banuta",description:"Infiltrate the hidden ape city and uncover their secrets. Navigate through the treacherous jungle.",rewards:["Ape City access","Banana Staff"],dangers:["Merlkin","Sibang","Kongra","Hydra"]},
  {name:"Spike Tasks Quest",level:50,premium:true,location:"Kazordoon",description:"Help the dwarves explore the dangerous Spike beneath Kazordoon. Daily repeatable tasks.",rewards:["Spike task points","Equipment","Boss access"],dangers:["Wyverns","Corym creatures","Crystal spiders"]},
  {name:"Dawnport Quest",level:1,premium:false,location:"Dawnport",description:"Complete the mainland preparation island. Choose your vocation and learn essential skills.",rewards:["Starting equipment","Vocation selection"],dangers:["Troll","Muglex Clan Footman"]},
  {name:"Grave Danger Quest",level:250,premium:true,location:"Multiple locations",description:"Investigate the resurgence of powerful undead lords across the land. Challenging boss fights.",rewards:["Falcon equipment access","Falcon Bastion access"],dangers:["Falcon Knight","Falcon Paladin","Grand Master Oberon"]},
  {name:"A Threatened Dream Quest",level:150,premium:true,location:"Feyrist",description:"Enter the dream realm of Feyrist and protect it from corruption. Beautiful areas with strong creatures.",rewards:["Feyrist access","Dream Courts equipment"],dangers:["Boar Man","Dark Faun","Twisted Pooka"]},
  {name:"Feaster of Souls Quest",level:250,premium:true,location:"Darashia",description:"Investigate the mysterious soul-eating entities plaguing the land. Unlocks access to Lost Souls hunting.",rewards:["Access to Lost Soul spawns","Feaster boss access"],dangers:["Flimsy Lost Soul","Mean Lost Soul","Freakish Lost Soul"]},
  {name:"The Rottin Wood and The Married Men Quest",level:0,premium:false,location:"Thais",description:"Two small beginner quests in the sewers and surroundings of Thais.",rewards:["Leather Legs","Wedding Ring"],dangers:["Bugs","Rotworms"]},
  {name:"Oramond Quest",level:80,premium:true,location:"Rathleton",description:"Help the citizens of Rathleton deal with threats. Unlocks access to various Oramond hunting grounds and tasks.",rewards:["Oramond access","Mino hunting access","Glooth gear"],dangers:["Glooth creatures","Minotaur Amazons"]},
  {name:"Dangerous Depths Quest",level:150,premium:true,location:"Kazordoon",description:"Descend into the deepest parts beneath Kazordoon. Three challenging warzones with daily boss rewards.",rewards:["Warzone 4-6 access","Gnomish equipment"],dangers:["Gnomish bosses","Diremaws"]},
  {name:"The Dream Courts Quest",level:200,premium:true,location:"Feyrist",description:"Challenge the rulers of dreams and nightmares. Access the Dream Courts for powerful equipment.",rewards:["Pair of Dreamwalkers","Dream equipment"],dangers:["Dream Court bosses","Maxxenius"]},
  {name:"Cults of Tibia Quest",level:200,premium:true,location:"Multiple locations",description:"Investigate dangerous cults that threaten the balance of the world. Multiple storylines.",rewards:["Cult access","Equipment","Boss access"],dangers:["Cult bosses","Energized creatures"]},
  {name:"The Thieves Guild Quest",level:0,premium:true,location:"Thais",description:"Join the underground thieves guild and complete missions to climb the ranks.",rewards:["Thieves Guild membership","Special NPC access"],dangers:["Minor encounters"]},
  {name:"Heart of Destruction Quest",level:250,premium:true,location:"Edron",description:"Enter the corrupted zones and face anomalies that threaten reality itself.",rewards:["Access to anomaly bosses","Special equipment"],dangers:["Rupture","Charge","Outburst","Realityquake"]},
  {name:"Adventurer's Guild Quest",level:0,premium:false,location:"Thais",description:"Join the Adventurer's Guild to access special rewards and daily shrines across the world.",rewards:["Daily reward shrine access","Adventurer's Guild membership"],dangers:["None"]},
  {name:"Roshamuul Quest",level:200,premium:true,location:"Roshamuul",description:"Explore the demon-infested prison island of Roshamuul. Unlock access to some of the best hunting spawns.",rewards:["Roshamuul access","Guzzlemaw Valley access"],dangers:["Guzzlemaw","Frazzlemaw","Silencer"]}
];

const SLOT_ICONS = {helmet:'ü™ñ',armor:'üõ°Ô∏è',legs:'üëñ',boots:'üë¢',shield:'‚õ®',weapon:'‚öîÔ∏è',ring:'üíç',amulet:'üìø'};

const CITIES = [
  {name:"Thais",coords:[32370,32215]},{name:"Carlin",coords:[32360,31780]},{name:"Venore",coords:[32955,32080]},
  {name:"Ab'Dendriel",coords:[32680,31640]},{name:"Kazordoon",coords:[32630,31930]},{name:"Ankrahmun",coords:[33160,32690]},
  {name:"Darashia",coords:[33220,32430]},{name:"Edron",coords:[33220,31810]},{name:"Port Hope",coords:[32620,32740]},
  {name:"Liberty Bay",coords:[32330,32860]},{name:"Svargrond",coords:[32260,31130]},{name:"Yalahar",coords:[32790,31270]},
  {name:"Rathleton",coords:[33650,31900]},{name:"Roshamuul",coords:[33530,32400]},{name:"Issavi",coords:[33920,31430]},
  {name:"Feyrist",coords:[33560,32220]}
];

// ============================================================
// STATE
// ============================================================
let allCreatures = [];
let creatureCache = {};
let currentPage = 1;
const PER_PAGE = 30;
let tibiaMap = null;

// ============================================================
// INIT
// ============================================================
document.addEventListener('DOMContentLoaded', () => {
  initNav();
  loadCreatures();
  renderHuntingSpots();
  renderEquipment();
  renderQuests();
  setTimeout(initMap, 500);
});

// ============================================================
// NAVIGATION
// ============================================================
function initNav() {
  const mobileMenu = document.getElementById('mobileMenu');
  const navLinks = document.getElementById('navLinks');
  mobileMenu.addEventListener('click', () => navLinks.classList.toggle('open'));

  document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', () => navLinks.classList.remove('open'));
  });

  // Tabs
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const tabId = btn.dataset.tab;
      btn.closest('.container').querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      btn.closest('.container').querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
    });
  });

  // Active nav on scroll
  const sections = document.querySelectorAll('section[id]');
  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY + 100;
    sections.forEach(sec => {
      const top = sec.offsetTop;
      const h = sec.offsetHeight;
      const id = sec.getAttribute('id');
      const link = document.querySelector(`.nav-links a[href="#${id}"]`);
      if (link) {
        if (scrollY >= top && scrollY < top + h) link.classList.add('active');
        else link.classList.remove('active');
      }
    });
  });
}

// ============================================================
// BESTIARY (API)
// ============================================================
async function loadCreatures() {
  const grid = document.getElementById('creatureGrid');
  grid.innerHTML = '<div class="skeleton" style="grid-column:1/-1"></div>';
  try {
    const res = await fetch('https://api.tibiadata.com/v4/creatures');
    const data = await res.json();
    allCreatures = data.creatures?.creature_list || [];
    document.getElementById('statCreatures').textContent = allCreatures.length;
    renderCreatures();
  } catch(e) {
    grid.innerHTML = '<p style="text-align:center;color:var(--blood);grid-column:1/-1">Failed to load creatures. Please refresh.</p>';
  }
  document.getElementById('creatureSearch').addEventListener('input', () => { currentPage = 1; renderCreatures(); });
}

function renderCreatures() {
  const query = document.getElementById('creatureSearch').value.toLowerCase().trim();
  const filtered = query ? allCreatures.filter(c => c.name.toLowerCase().includes(query)) : allCreatures;
  const totalPages = Math.ceil(filtered.length / PER_PAGE);
  if (currentPage > totalPages) currentPage = totalPages || 1;
  const start = (currentPage - 1) * PER_PAGE;
  const page = filtered.slice(start, start + PER_PAGE);

  const grid = document.getElementById('creatureGrid');
  grid.innerHTML = page.map(c => {
    const race = c.race || c.name.toLowerCase().replace(/\s+/g, '');
    const imgUrl = `https://static.tibia.com/images/library/${encodeURIComponent(race)}.gif`;
    return `<div class="creature-card" onclick="openCreature('${race.replace(/'/g, "\\'")}','${c.name.replace(/'/g, "\\'")}')">
      <img src="${imgUrl}" alt="${c.name}" loading="lazy" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2264%22 height=%2264%22><rect fill=%22%231a1614%22 width=%2264%22 height=%2264%22/><text x=%2232%22 y=%2236%22 fill=%22%23d4a537%22 text-anchor=%22middle%22 font-size=%2224%22>?</text></svg>'">
      <h4>${c.name}</h4>
    </div>`;
  }).join('');

  document.getElementById('creatureCount').textContent = `Showing ${start+1}‚Äì${Math.min(start+PER_PAGE, filtered.length)} of ${filtered.length} creatures`;
  renderPagination(totalPages);
}

function renderPagination(totalPages) {
  const pag = document.getElementById('creaturePagination');
  if (totalPages <= 1) { pag.innerHTML = ''; return; }
  let html = `<button class="page-btn" onclick="goPage(${currentPage-1})" ${currentPage===1?'disabled':''}>‚Äπ</button>`;

  let pages = [];
  if (totalPages <= 7) {
    for (let i = 1; i <= totalPages; i++) pages.push(i);
  } else {
    pages = [1];
    if (currentPage > 3) pages.push('...');
    for (let i = Math.max(2, currentPage-1); i <= Math.min(totalPages-1, currentPage+1); i++) pages.push(i);
    if (currentPage < totalPages-2) pages.push('...');
    pages.push(totalPages);
  }

  pages.forEach(p => {
    if (p === '...') html += `<span style="color:var(--parchment-muted);padding:0 4px">...</span>`;
    else html += `<button class="page-btn ${p===currentPage?'active':''}" onclick="goPage(${p})">${p}</button>`;
  });
  html += `<button class="page-btn" onclick="goPage(${currentPage+1})" ${currentPage===totalPages?'disabled':''}>‚Ä∫</button>`;
  pag.innerHTML = html;
}

function goPage(p) { currentPage = p; renderCreatures(); document.getElementById('bestiary').scrollIntoView({behavior:'smooth',block:'start'}); }

// ============================================================
// CREATURE MODAL
// ============================================================
async function openCreature(race, name) {
  const modal = document.getElementById('creatureModal');
  const body = document.getElementById('modalBody');
  document.getElementById('modalCreatureName').textContent = name;
  body.innerHTML = '<div class="modal-loading"><div class="loading-spinner"></div><p style="margin-top:12px">Loading creature data...</p></div>';
  modal.classList.add('open');

  if (creatureCache[race]) {
    renderCreatureModal(creatureCache[race], race);
    return;
  }

  try {
    const res = await fetch(`https://api.tibiadata.com/v4/creature/${encodeURIComponent(race)}`);
    const data = await res.json();
    const c = data.creature;
    if (!c) throw new Error('No data');
    creatureCache[race] = c;
    renderCreatureModal(c, race);
  } catch(e) {
    body.innerHTML = '<p style="text-align:center;color:var(--blood);padding:40px">Failed to load creature details.</p>';
  }
}

function renderCreatureModal(c, race) {
  const body = document.getElementById('modalBody');
  const imgUrl = `https://static.tibia.com/images/library/${encodeURIComponent(race)}.gif`;
  const immunities = [];
  if (c.immune_to) c.immune_to.forEach(i => immunities.push(i));
  const loot = c.loot_list || [];

  body.innerHTML = `
    <div class="modal-creature-top">
      <img src="${imgUrl}" alt="${c.name}" class="modal-creature-img" onerror="this.style.display='none'">
      <div class="modal-creature-info">
        <p style="font-size:14px;color:var(--parchment-muted)">${c.description || 'A mysterious creature.'}</p>
      </div>
    </div>
    <div class="modal-stat-grid">
      <div class="modal-stat"><div class="modal-stat-label">Hit Points</div><div class="modal-stat-value">${c.hitpoints ?? '?'}</div></div>
      <div class="modal-stat"><div class="modal-stat-label">Experience</div><div class="modal-stat-value">${c.experience_points ?? '?'}</div></div>
      <div class="modal-stat"><div class="modal-stat-label">Speed</div><div class="modal-stat-value">${c.speed ?? '?'}</div></div>
      <div class="modal-stat"><div class="modal-stat-label">Armor</div><div class="modal-stat-value">${c.armour ?? '?'}</div></div>
    </div>
    ${c.be_convinced !== undefined ? `<div class="modal-section"><h4>Behavior</h4><p>
      ${c.is_pushable ? '‚úì Pushable' : '‚úó Not pushable'} ¬∑
      ${c.pushes_objects ? 'Pushes objects' : "Doesn't push"} ¬∑
      ${c.runs_at !== undefined && c.runs_at > 0 ? `Runs at ${c.runs_at} HP` : 'Does not run'}
    </p></div>` : ''}
    ${immunities.length ? `<div class="modal-section"><h4>Immunities</h4><div>${immunities.map(i => `<span class="immune-tag immune-${i.toLowerCase()}">${i}</span>`).join('')}</div></div>` : ''}
    ${loot.length ? `<div class="modal-section"><h4>Loot</h4><div>${loot.map(l => `<span class="loot-item">${l}</span>`).join('')}</div></div>` : ''}
    ${c.weakness ? `<div class="modal-section"><h4>Weaknesses</h4><div>${c.weakness.map(w => `<span class="immune-tag" style="background:rgba(239,68,68,.15);color:#ef4444">${w}</span>`).join('')}</div></div>` : ''}
  `;
}

document.getElementById('modalClose').addEventListener('click', () => document.getElementById('creatureModal').classList.remove('open'));
document.getElementById('creatureModal').addEventListener('click', e => { if (e.target === e.currentTarget) e.currentTarget.classList.remove('open'); });

// ============================================================
// HUNTING SPOTS
// ============================================================
function renderHuntingSpots() {
  renderSpots();
  document.querySelectorAll('#vocFilter .filter-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('#vocFilter .filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      renderSpots();
    });
  });
  document.getElementById('spotLevelFilter').addEventListener('change', renderSpots);
}

function renderSpots() {
  const voc = document.querySelector('#vocFilter .filter-btn.active').dataset.voc;
  const lvl = document.getElementById('spotLevelFilter').value;
  let spots = HUNTING_SPOTS;
  if (voc !== 'all') spots = spots.filter(s => s.voc.includes(voc));
  if (lvl !== 'all') {
    const [min, max] = lvl.split('-').map(Number);
    spots = spots.filter(s => s.level[1] >= min && s.level[0] <= max);
  }

  document.getElementById('spotGrid').innerHTML = spots.length ? spots.map(s => `
    <div class="spot-card">
      <div class="spot-header">
        <span class="spot-name">${s.name}</span>
        <span class="spot-level">Lv ${s.level[0]}‚Äì${s.level[1]}</span>
      </div>
      <div class="spot-meta">
        <span>‚öîÔ∏è Exp: ${renderStars(s.exp)}</span>
        <span>üí∞ Loot: ${renderStars(s.loot)}</span>
      </div>
      <div class="spot-meta">
        <span>üë• ${s.voc.map(v => v.charAt(0).toUpperCase() + v.slice(1)).join(', ')}</span>
      </div>
      <div class="spot-creatures"><strong>Creatures:</strong> ${s.creatures.join(', ')}</div>
      <div class="spot-actions">
        <button class="btn-sm btn-gold" onclick="showOnMap(${s.coords[0]},${s.coords[1]},'${s.name.replace(/'/g,"\\'")}')">Show on Map</button>
      </div>
    </div>
  `).join('') : '<p style="text-align:center;color:var(--parchment-muted);grid-column:1/-1">No hunting spots match your filters.</p>';
}

function renderStars(n) {
  let html = '<span class="spot-rating">';
  for (let i = 1; i <= 5; i++) html += `<span class="star ${i <= n ? '' : 'empty'}">‚òÖ</span>`;
  return html + '</span>';
}

// ============================================================
// EQUIPMENT PLANNER
// ============================================================
function renderEquipment() {
  let currentVoc = 'knight', currentLvl = '8-30';
  const render = () => {
    const eq = EQUIPMENT[currentVoc]?.[currentLvl];
    const slots = document.getElementById('eqSlots');
    if (!eq) { slots.innerHTML = '<div class="eq-empty">No equipment data for this combination.</div>'; return; }
    slots.innerHTML = Object.entries(eq).map(([slot, item]) => `
      <div class="eq-slot">
        <div class="eq-slot-header">
          <div class="eq-slot-icon">${SLOT_ICONS[slot] || '?'}</div>
          <div class="eq-slot-type">${slot.charAt(0).toUpperCase() + slot.slice(1)}</div>
        </div>
        <div class="eq-item-name">${item.name}</div>
        <div class="eq-item-stats"><span class="stat-highlight">${item.stats}</span></div>
        <div class="eq-item-source">üìç ${item.source}</div>
      </div>
    `).join('');
  };

  document.querySelectorAll('#eqVocBtns .voc-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('#eqVocBtns .voc-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentVoc = btn.dataset.voc;
      render();
    });
  });
  document.querySelectorAll('#eqLevelBtns .eq-level-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('#eqLevelBtns .eq-level-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentLvl = btn.dataset.lvl;
      render();
    });
  });
  render();
}

// ============================================================
// INTERACTIVE MAP (Leaflet)
// ============================================================
function initMap() {
  const mapEl = document.getElementById('mapContainer');
  mapEl.id = 'leafletMap';
  mapEl.style.cssText = 'width:100%;height:500px;border-radius:var(--radius-lg);border:1px solid var(--border);background:var(--bg-card)';

  tibiaMap = L.map('leafletMap', {
    crs: L.CRS.Simple,
    minZoom: -3,
    maxZoom: 1,
    zoomControl: true,
    attributionControl: false
  });

  const bounds = [[0, 0], [2048, 2560]];
  L.imageOverlay('https://tibiamaps.github.io/tibia-map-data/floor-07-map.png', bounds).addTo(tibiaMap);
  tibiaMap.fitBounds(bounds);
  tibiaMap.setMaxBounds(bounds);

  const toLatLng = (x, y) => {
    const lat = 2048 - ((y - 30720) / 256) * 2048 / ((33920 - 30720) / 256);
    const lng = ((x - 31744) / 256) * 2560 / ((34560 - 31744) / 256);
    return [lat, lng];
  };

  // City markers
  CITIES.forEach(c => {
    const [lat, lng] = toLatLng(c.coords[0], c.coords[1]);
    L.marker([lat, lng], {
      icon: L.divIcon({
        className: 'city-label',
        html: `<span style="background:rgba(59,130,246,.85);color:#fff;padding:2px 8px;border-radius:4px;font-size:11px;font-family:Cinzel,serif;font-weight:600;white-space:nowrap;pointer-events:none">${c.name}</span>`,
        iconSize: [0, 0],
        iconAnchor: [0, 0]
      })
    }).addTo(tibiaMap);
  });

  // Hunting spot markers
  HUNTING_SPOTS.forEach(s => {
    const [lat, lng] = toLatLng(s.coords[0], s.coords[1]);
    const marker = L.circleMarker([lat, lng], {
      radius: 6,
      fillColor: '#d4a537',
      color: '#8b6914',
      weight: 2,
      fillOpacity: 0.9
    }).addTo(tibiaMap);
    marker.bindPopup(`<div style="font-family:Cinzel,serif;min-width:160px">
      <strong style="color:#d4a537">${s.name}</strong><br>
      <span style="font-family:Crimson Text,serif;font-size:13px">Level ${s.level[0]}‚Äì${s.level[1]}<br>
      ${s.creatures.slice(0, 3).join(', ')}${s.creatures.length > 3 ? '...' : ''}</span>
    </div>`);
    s._marker = marker;
    s._latlng = [lat, lng];
  });
}

function showOnMap(x, y, name) {
  document.getElementById('map').scrollIntoView({behavior: 'smooth'});
  setTimeout(() => {
    const spot = HUNTING_SPOTS.find(s => s.coords[0] === x && s.coords[1] === y);
    if (spot && spot._marker && tibiaMap) {
      tibiaMap.setView(spot._latlng, 0, {animate: true});
      spot._marker.openPopup();
    }
  }, 600);
}

// ============================================================
// QUEST GUIDE
// ============================================================
function renderQuests() {
  const render = () => {
    const query = document.getElementById('questSearch').value.toLowerCase().trim();
    const lvl = document.getElementById('questLevelFilter').value;
    const premOnly = document.getElementById('questPremiumFilter').checked;
    let quests = [...QUESTS];
    if (query) quests = quests.filter(q => q.name.toLowerCase().includes(query) || q.location.toLowerCase().includes(query));
    if (lvl !== 'all') {
      const [min, max] = lvl.split('-').map(Number);
      quests = quests.filter(q => q.level >= min && q.level <= max);
    }
    if (premOnly) quests = quests.filter(q => q.premium);
    quests.sort((a, b) => a.level - b.level);

    document.getElementById('questGrid').innerHTML = quests.length ? quests.map(q => `
      <div class="quest-card">
        <div class="quest-header" onclick="this.parentElement.classList.toggle('open')">
          <span class="quest-expand">‚ñ∏</span>
          <span class="quest-title">${q.name}</span>
          <div class="quest-badges">
            <span class="badge badge-level">Lv ${q.level}+</span>
            ${q.premium ? '<span class="badge badge-premium">‚≠ê P</span>' : ''}
          </div>
        </div>
        <div class="quest-body">
          <div class="quest-detail"><h5>Description</h5><p>${q.description}</p></div>
          <div class="quest-detail"><h5>Location</h5><p>üìç ${q.location}</p></div>
          <div class="quest-detail"><h5>Rewards</h5><ul>${q.rewards.map(r => `<li>${r}</li>`).join('')}</ul></div>
          <div class="quest-detail"><h5>Dangers</h5><ul>${q.dangers.map(d => `<li>${d}</li>`).join('')}</ul></div>
        </div>
      </div>
    `).join('') : '<div class="quest-no-results">No quests match your filters.</div>';
  };

  render();
  document.getElementById('questSearch').addEventListener('input', render);
  document.getElementById('questLevelFilter').addEventListener('change', render);
  document.getElementById('questPremiumFilter').addEventListener('change', render);
}
</script>
</body>
</html>